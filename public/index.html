<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Essay Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0;
            min-height: 600px;
        }

        .input-section {
            padding: 30px;
            background: #f8fafc;
            border-right: 1px solid #e2e8f0;
        }

        .output-section {
            padding: 30px;
            background: white;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            color: #1e293b;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #374151;
        }

        select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            transition: border-color 0.3s;
        }

        select:focus {
            outline: none;
            border-color: #4f46e5;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #4f46e5;
        }

        .analyze-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(79, 70, 229, 0.3);
        }

        .analyze-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            display: none;
        }

        .score-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .score-card {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #bae6fd;
        }

        .score-card h3 {
            font-size: 0.9rem;
            color: #0369a1;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .score-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #0c4a6e;
        }

        .feedback-section {
            margin-bottom: 25px;
        }

        .feedback-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-content {
            background: #f8fafc;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #4f46e5;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4f46e5;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .api-notice {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .api-notice h4 {
            color: #92400e;
            margin-bottom: 8px;
        }

        .api-notice p {
            color: #78350f;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .input-section {
                border-right: none;
                border-bottom: 1px solid #e2e8f0;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AI Essay Analyzer</h1>
            <p>Get instant feedback on essay structure, content, and writing quality</p>
        </div>

        <div class="main-content">
            <div class="input-section">
                <h2 class="section-title">Submit Your Essay</h2>
                
                <div class="api-notice">
                    <h4>Setup Required</h4>
                    <p>Add your Hugging Face API token in the JavaScript section below to enable real AI analysis.</p>
                </div>

                <div class="form-group">
                    <label for="essayType">Essay Type</label>
                    <select id="essayType">
                        <option value="argumentative">Argumentative</option>
                        <option value="expository">Expository</option>
                        <option value="narrative">Narrative</option>
                        <option value="descriptive">Descriptive</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="gradeLevel">Grade Level</label>
                    <select id="gradeLevel">
                        <option value="middle">Middle School (6-8)</option>
                        <option value="high">High School (9-12)</option>
                        <option value="college">College</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="essayText">Paste your essay here</label>
                    <textarea id="essayText" placeholder="Paste your essay text here..."></textarea>
                </div>

                <button class="analyze-btn" onclick="analyzeEssay()">Analyze Essay</button>
            </div>

            <div class="output-section">
                <h2 class="section-title">Analysis Results</h2>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>Analyzing your essay...</p>
                </div>

                <div class="results-container" id="results">
                    <div class="score-overview">
                        <div class="score-card">
                            <h3>Overall</h3>
                            <div class="score-value" id="overallScore">-</div>
                        </div>
                        <div class="score-card">
                            <h3>Structure</h3>
                            <div class="score-value" id="structureScore">-</div>
                        </div>
                        <div class="score-card">
                            <h3>Content</h3>
                            <div class="score-value" id="contentScore">-</div>
                        </div>
                        <div class="score-card">
                            <h3>Grammar</h3>
                            <div class="score-value" id="grammarScore">-</div>
                        </div>
                    </div>

                    <div class="feedback-section">
                        <div class="feedback-title">
                            üìã Structure & Organization
                        </div>
                        <div class="feedback-content" id="structureFeedback">
                            Analysis will appear here...
                        </div>
                    </div>

                    <div class="feedback-section">
                        <div class="feedback-title">
                            üí° Content & Arguments
                        </div>
                        <div class="feedback-content" id="contentFeedback">
                            Analysis will appear here...
                        </div>
                    </div>

                    <div class="feedback-section">
                        <div class="feedback-title">
                            ‚úèÔ∏è Writing & Grammar
                        </div>
                        <div class="feedback-content" id="grammarFeedback">
                            Analysis will appear here...
                        </div>
                    </div>

                    <div class="feedback-section">
                        <div class="feedback-title">
                            üéØ Recommendations
                        </div>
                        <div class="feedback-content" id="recommendations">
                            Recommendations will appear here...
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // STEP 1: Add your Hugging Face API token here
        const HF_API_TOKEN = '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';
        
        // STEP 2: Add your chosen model name here
        const MODEL_NAME = 'hydraadra112/academic_writer';
        
        async function analyzeEssay() {
            const essayText = document.getElementById('essayText').value.trim();
            const essayType = document.getElementById('essayType').value;
            const gradeLevel = document.getElementById('gradeLevel').value;

            if (!essayText) {
                alert('Please paste your essay text before analyzing.');
                return;
            }

            if (HF_API_TOKEN === 'YOUR_API_TOKEN_HERE') {
                alert('Please add your Hugging Face API token in the code to enable AI analysis.');
                return;
            }

            // Show loading state
            document.getElementById('loading').style.display = 'block';
            document.getElementById('results').style.display = 'none';
            document.querySelector('.analyze-btn').disabled = true;

            try {
                // Real AI analysis with Hugging Face
                const analysis = await analyzeWithHuggingFace(essayText, essayType, gradeLevel);
                displayResults(analysis);
            } catch (error) {
                console.error('Analysis error:', error);
                // Fallback to demo analysis if API fails
                const analysis = generateDemoAnalysis(essayText, essayType, gradeLevel);
                displayResults(analysis);
                alert('Using demo analysis. Check console for API errors.');
            }
            
            // Hide loading state
            document.getElementById('loading').style.display = 'none';
            document.getElementById('results').style.display = 'block';
            document.querySelector('.analyze-btn').disabled = false;
        }

        async function analyzeWithHuggingFace(text, type, level) {
            try {
                console.log('Making API request to Hugging Face...');
                const response = await fetch(`https://api-inference.huggingface.co/models/${MODEL_NAME}`, {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${HF_API_TOKEN}`,
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        inputs: `Analyze this ${type} essay for ${level} level: ${text}`,
                        parameters: {
                            max_length: 200,
                            min_length: 50,
                            do_sample: true,
                            temperature: 0.7
                        }
                    })
                });

                console.log('Response status:', response.status);
                
                if (!response.ok) {
                    const errorText = await response.text();
                    console.error('API Error Response:', errorText);
                    throw new Error(`API request failed: ${response.status} - ${errorText}`);
                }

                const result = await response.json();
                console.log('API Response:', result);
                
                // Process the AI results into our format
                return processAcademicWriterResults(result, text, type, level);
            } catch (error) {
                console.error('Detailed error:', error);
                throw error;
            }
        }

        function splitTextIntoChunks(text, maxLength) {
            const words = text.split(' ');
            const chunks = [];
            let currentChunk = [];

            for (const word of words) {
                if (currentChunk.join(' ').length + word.length > maxLength && currentChunk.length > 0) {
                    chunks.push(currentChunk.join(' '));
                    currentChunk = [word];
                } else {
                    currentChunk.push(word);
                }
            }

            if (currentChunk.length > 0) {
                chunks.push(currentChunk.join(' '));
            }

            return chunks;
        }

        function processAcademicWriterResults(aiResult, text, type, level) {
            // The academic writer model returns generated text with feedback
            const wordCount = text.split(' ').length;
            const paragraphs = text.split('\n\n').filter(p => p.trim().length > 0).length;
            const sentences = text.split('.').length - 1;
            
            // Extract AI feedback if available
            let aiFeedback = '';
            if (aiResult && aiResult.length > 0 && aiResult[0].generated_text) {
                aiFeedback = aiResult[0].generated_text;
            }
            
            // Generate scores based on text analysis and AI feedback
            const structureScore = calculateStructureScore(paragraphs, sentences, wordCount);
            const contentScore = calculateContentScore(wordCount, type, aiFeedback);
            const grammarScore = calculateGrammarScore(text, aiFeedback);
            const overallScore = Math.round((structureScore + contentScore + grammarScore) / 3);

            return {
                scores: {
                    overall: overallScore,
                    structure: structureScore,
                    content: contentScore,
                    grammar: grammarScore
                },
                feedback: {
                    structure: generateStructureFeedback(paragraphs, sentences, structureScore),
                    content: generateContentFeedback(wordCount, type, contentScore, aiFeedback),
                    grammar: generateGrammarFeedback(text, grammarScore, aiFeedback),
                    recommendations: generateSmartRecommendations(structureScore, contentScore, grammarScore, paragraphs, wordCount, type, aiFeedback)
                }
            };
        }

        function calculateStructureScore(paragraphs, sentences, wordCount) {
            let score = 5; // base score
            
            // Paragraph structure
            if (paragraphs >= 4 && paragraphs <= 6) score += 2;
            else if (paragraphs >= 7) score += 1;
            else if (paragraphs < 3) score -= 1;
            
            // Sentence variety
            const avgSentenceLength = wordCount / sentences;
            if (avgSentenceLength >= 15 && avgSentenceLength <= 25) score += 1;
            
            // Word count appropriateness
            if (wordCount >= 300 && wordCount <= 800) score += 1;
            else if (wordCount > 800) score += 0.5;
            
            return Math.min(10, Math.max(1, Math.round(score)));
        }

        function calculateContentScore(wordCount, type, aiFeedback) {
            let score = 6; // base score
            
            // Word count impact
            if (wordCount >= 400) score += 1;
            if (wordCount >= 600) score += 1;
            if (wordCount < 200) score -= 2;
            
            // AI feedback analysis
            if (aiFeedback.toLowerCase().includes('strong') || aiFeedback.toLowerCase().includes('excellent')) score += 1;
            if (aiFeedback.toLowerCase().includes('weak') || aiFeedback.toLowerCase().includes('poor')) score -= 1;
            if (aiFeedback.toLowerCase().includes('clear') || aiFeedback.toLowerCase().includes('coherent')) score += 1;
            
            return Math.min(10, Math.max(1, Math.round(score)));
        }

        function calculateGrammarScore(text, aiFeedback) {
            let score = 7; // base score
            
            // Simple grammar checks
            const sentenceEndErrors = (text.match(/[a-z]\.[A-Z]/g) || []).length;
            const extraSpaces = (text.match(/  +/g) || []).length;
            const capsErrors = (text.match(/[a-z][A-Z]/g) || []).length;
            
            score -= sentenceEndErrors * 0.5;
            score -= extraSpaces * 0.3;
            score -= capsErrors * 0.2;
            
            // AI feedback analysis
            if (aiFeedback.toLowerCase().includes('grammar') && aiFeedback.toLowerCase().includes('good')) score += 1;
            if (aiFeedback.toLowerCase().includes('error') || aiFeedback.toLowerCase().includes('mistake')) score -= 1;
            
            return Math.min(10, Math.max(1, Math.round(score)));
        }

        function generateStructureFeedback(paragraphs, sentences, score) {
            let feedback = `Your essay has ${paragraphs} paragraphs with ${sentences} sentences. `;
            
            if (score >= 8) {
                feedback += "Excellent structure! Your essay is well-organized with clear paragraphs that flow logically.";
            } else if (score >= 6) {
                feedback += "Good structure overall. ";
                if (paragraphs < 4) feedback += "Consider adding more paragraphs to better develop your ideas.";
                else feedback += "Your paragraph organization works well for your argument.";
            } else {
                feedback += "Structure needs improvement. ";
                if (paragraphs < 3) feedback += "Add more paragraphs - aim for at least 4 (intro, 2+ body, conclusion).";
                else feedback += "Focus on making each paragraph have a clear purpose and smooth transitions.";
            }
            
            return feedback;
        }

        function generateContentFeedback(wordCount, type, score, aiFeedback) {
            let feedback = `Word count: ${wordCount}. `;
            
            if (score >= 8) {
                feedback += `Strong content development for a ${type} essay. Your arguments are well-supported and clearly presented.`;
            } else if (score >= 6) {
                feedback += `Good content foundation. `;
                if (wordCount < 300) feedback += "Consider expanding with more examples and evidence.";
                else feedback += "Your ideas are developing well - focus on strengthening your arguments.";
            } else {
                feedback += `Content needs development. `;
                if (wordCount < 200) feedback += "Your essay is too short - aim for at least 300 words.";
                else feedback += "Work on providing stronger evidence and clearer explanations.";
            }
            
            // Add AI insights if available
            if (aiFeedback && aiFeedback.length > 50) {
                feedback += ` AI Analysis: ${aiFeedback.substring(0, 100)}...`;
            }
            
            return feedback;
        }

        function generateGrammarFeedback(text, score, aiFeedback) {
            let feedback = "";
            
            if (score >= 8) {
                feedback = "Excellent grammar and writing mechanics. Your sentences are clear and well-constructed.";
            } else if (score >= 6) {
                feedback = "Good grammar overall with minor areas for improvement. ";
                if (text.includes('  ')) feedback += "Watch for extra spaces between words.";
                feedback += "Consider varying your sentence structure for better flow.";
            } else {
                feedback = "Grammar and mechanics need attention. ";
                feedback += "Proofread carefully for sentence structure, punctuation, and spelling errors.";
            }
            
            return feedback;
        }

        function generateSmartRecommendations(structure, content, grammar, paragraphs, wordCount, type, aiFeedback) {
            const recommendations = [];
            
            if (structure < 7) {
                if (paragraphs < 4) recommendations.push("Add more paragraphs for better organization");
                else recommendations.push("Improve paragraph transitions and logical flow");
            }
            
            if (content < 7) {
                if (wordCount < 300) recommendations.push("Expand your essay with more supporting details");
                else recommendations.push("Strengthen your arguments with better evidence");
            }
            
            if (grammar < 7) {
                recommendations.push("Proofread for grammar and sentence structure");
            }
            
            // Type-specific recommendations
            if (type === 'argumentative') {
                recommendations.push("Ensure you address counterarguments");
                recommendations.push("Use strong evidence to support your thesis");
            } else if (type === 'expository') {
                recommendations.push("Focus on clear explanations and examples");
            } else if (type === 'narrative') {
                recommendations.push("Use descriptive language and show, don't tell");
            }
            
            recommendations.push("Read your essay aloud to check for flow and clarity");
            
            return recommendations.join('. ') + '.';
        }

        function generateDemoAnalysis(text, type, level) {
            // Demo analysis - replace this with actual AI API integration
            const wordCount = text.split(' ').length;
            const paragraphs = text.split('\n\n').length;
            
            // Simulate scoring based on text characteristics
            const structureScore = Math.min(10, Math.max(6, 6 + (paragraphs - 1)));
            const contentScore = Math.min(10, Math.max(5, Math.floor(wordCount / 50)));
            const grammarScore = Math.min(10, Math.max(6, 10 - (text.split('.').length - text.split('. ').length)));
            const overallScore = Math.round((structureScore + contentScore + grammarScore) / 3);

            return {
                scores: {
                    overall: overallScore,
                    structure: structureScore,
                    content: contentScore,
                    grammar: grammarScore
                },
                feedback: {
                    structure: `Your essay has ${paragraphs} paragraphs. ${paragraphs >= 4 ? 'Good structure with clear introduction, body, and conclusion.' : 'Consider adding more paragraphs for better organization.'} Make sure each paragraph has a clear topic sentence.`,
                    content: `Word count: ${wordCount} words. ${wordCount >= 300 ? 'Good length for developing your ideas.' : 'Consider expanding your arguments with more examples and evidence.'} Your ${type} essay shows ${contentScore >= 7 ? 'strong' : 'developing'} content development.`,
                    grammar: `${grammarScore >= 8 ? 'Strong grammar and sentence structure.' : 'Some areas for improvement in grammar and sentence variety.'} Consider varying your sentence lengths and checking for common errors like run-on sentences.`,
                    recommendations: [
                        paragraphs < 4 ? 'Add more paragraphs to better organize your ideas' : 'Maintain your clear paragraph structure',
                        wordCount < 300 ? 'Expand your essay with more supporting details' : 'Good essay length - focus on quality of arguments',
                        'Use transition words between paragraphs',
                        'Check for spelling and grammar errors',
                        `For ${type} essays, ensure you have a clear thesis statement`
                    ].join('. ') + '.'
                }
            };
        }

        function displayResults(analysis) {
            // Display scores
            document.getElementById('overallScore').textContent = analysis.scores.overall + '/10';
            document.getElementById('structureScore').textContent = analysis.scores.structure + '/10';
            document.getElementById('contentScore').textContent = analysis.scores.content + '/10';
            document.getElementById('grammarScore').textContent = analysis.scores.grammar + '/10';

            // Display feedback
            document.getElementById('structureFeedback').textContent = analysis.feedback.structure;
            document.getElementById('contentFeedback').textContent = analysis.feedback.content;
            document.getElementById('grammarFeedback').textContent = analysis.feedback.grammar;
            document.getElementById('recommendations').textContent = analysis.feedback.recommendations;
        }

        // Auto-resize textarea
        document.getElementById('essayText').addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = this.scrollHeight + 'px';
        });
    </script>
</body>
</html> 